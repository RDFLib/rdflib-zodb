language: python
# whitelist
branches:
  only:
    - master

python:
  - 2.7

env:
  - TOX_ENV=py27
  - TOX_ENV=py34
  - TOX_ENV=flake

install:
    - pip install --default-timeout 60 tox

script:
    - tox -e $TOX_ENV

jobs:
    include:
        - python:
            - 2.7
          script: tox -e py27
        - python:
            - 3.4
          script: tox -e py34
        - python:
            - 3.6
          script: tox -e py36
        - stage: coverage
          install: pip install --quiet --default-timeout 60 coveralls tox
          script: tox -e cover
          after_script: coveralls
